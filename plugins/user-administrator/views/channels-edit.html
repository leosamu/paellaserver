<div>
	<section class="ps-search-bar navbar navbar-default">
	    <div class="container-fluid">
	    

			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#admin-navbar-collapse-1" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>

			<div class="collapse navbar-collapse" id="admin-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li >
						<a href="#/catalog">
				    		{{'go_to_catalog_text' | translate}}
				    	</a>
				    </li>

					<li>
						<a href="#/useradmin/videos">
				    		{{'myvideos_text' | translate}}
				    	</a>
				    </li>
					<li class="active">
						<a href="#/useradmin/channels">
				    		{{'mychannels_text' | translate}}
				    	</a>
				    </li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li>
						<a href ng-click="newChannel()">
				    		<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> {{'new_channel_text_title' | translate}}
				    	</a>
				    </li>
				</ul>				
			</div>
		</div>
	</section>


	<section style="min-height:250px;">
		<div style="height: 30px;"></div>
		<div ng-show="errorLoading">
			<div class="alert alert-danger" role="alert">
				<strong>Error!</strong> Ha ocurrido un error. 
			</div>
		</div>			

		<div ng-show="!errorLoading && loading">
			<loader></loader>	
		</div>

		<div ng-show="!errorLoading">
			<div class="panel panel-default">
				<!-- Default panel contents -->  
				<div class="panel-body">
					<h3>{{channel.title}}</h3>
					<p>{{channel.videos.length || 0}} videos</p>
				</div>
				
				<!-- Channel List group -->
				<ul class="list-group media-list">
					<li class="list-group-item active">
						<h5>
							Canales <span class="badge">{{channel.children.length || 0}}</span>
							<button type="button" class="btn btn-default pull-right" style="margin-top:-10px;" ng-click="addChannel()">
								<span class="glyphicon glyphicon-plus"></span>
							</button>
						</h5>
					</li>
				</ul>
				<ul class="list-group" ng-hide="channel.children && channel.children.length>0">
					<li class="list-group-item list-group-item-warning">
						<h5>La lista de canales está vacía</h5>
						<p class="list-group-item-text"> Añade algún canal</p>
					</li>
				</ul>					
				<ul class="list-group media-list" ui-sortable ng-model="channel.children">
					<li class="list-group-item" ng-repeat="c in channel.children">
						<div class="media-left">
							<a href="#">
								<img class="media-object" style="width:100px;" src="resources/images/channel-placeholder.png" ng-src="{{c.repository.server}}{{c.repository.endpoint}}{{c._id}}/{{c.thumbnail}}">
							</a>
						</div>
						<div class="media-body">
								
							<div class="btn-toolbar pull-right" role="toolbar">
								<div class="btn-group" role="group">
									<a class="btn btn-xs btn-default" target="_blank" ng-href="#/catalog/channel/{{c._id}}"> <span class="glyphicon glyphicon-eye-open"></span> </a>
									<a class="btn btn-xs btn-default" ng-href="#/useradmin/channels/{{c._id}}""> <span class="glyphicon glyphicon-pencil"></span> </a>
								</div>
								<div class="btn-group" role="group">
									<button class="btn btn-xs btn-danger" ng-click="removeChannelFromChannel(c)">
										<span class="glyphicon glyphicon-remove"></span>
									</button>
								</div>
							</div>
							
							<h5 class="media-heading">
								<div class="btn-group" dropdown is-open="status.isopen">
							      <button type="button" class="btn btn-primary btn-xs" >
							        {{$index+1}} 
							      </button>
							    </div>	
															
								<div style="display:inline-block; width:89%; white-space:nowrap; overflow: hidden; text-overflow=ellipsis"> {{c.title}} </div>
							</h5>
							<p class="list-group-item-text text-danger">
								{{c.owner[0].contactData.name}} {{c.owner[0].contactData.lastName}}
							</p>
							<p class="list-group-item-text">
								<span class="label label-default">{{c.creationDate | amDateFormat:'ll'}}</span>								
							</p>
						</div>
					</li>
				</ul>


				<!-- Video List group -->
				<ul class="list-group media-list">
					<li class="list-group-item active">
						<h5>
							Videos <span class="badge">{{channel.videos.length || 0}}</span>
							<button class="btn btn-default pull-right" style="margin-top:-10px;" ng-click="addVideo()">
								<span class="glyphicon glyphicon-plus"></span>
							</button>
						</h5>						
					</li>
				</ul>			
				<ul class="list-group" ng-hide="channel.videos && channel.videos.length>0">
					<li class="list-group-item list-group-item-warning">
						<h5>La lista de videos está vacía</h5>
						<p class="list-group-item-text"> Añade algún video</p>
					</li>
				</ul>					
				<ul class="list-group media-list" ui-sortable ng-model="channel.videos">
					<li class="list-group-item" ng-repeat="v in channel.videos">
						<div class="media-left">
							<a href="#">
								<img class="media-object" style="width:100px;" src="resources/images/video-placeholder.png" ng-src="{{v.repository.server}}{{v.repository.endpoint}}{{v._id}}/{{v.thumbnail}}">
							</a>
						</div>
						<div class="media-body">
								

						<div class="btn-toolbar pull-right" role="toolbar">
							<div class="btn-group" role="group">
								<a class="btn btn-xs btn-default" target="_blank" href="/player/?id={{v._id}}&autoplay=true"> <span class="glyphicon glyphicon-eye-open"></span> </a>
								<button class="btn btn-xs btn-default" ng-click="editVideo(v._id)"> <span class="glyphicon glyphicon-pencil"></span> </button>
							</div>
							<div class="btn-group" role="group">
								<button class="btn btn-xs btn-danger" ng-click="removeVideoFromChannel(v)">
									<span class="glyphicon glyphicon-remove"></span>
								</button>
							</div>
						</div>


		
						
						<h5 class="media-heading">
							<div class="btn-group" dropdown is-open="status.isopen">
						      <button type="button" class="btn btn-primary btn-xs" >
						        {{$index+1}} 
						      </button>
						    </div>	
														
							<div style="display:inline-block; width:89%; white-space:nowrap; overflow: hidden; text-overflow=ellipsis"> {{v.title}} </div>							
							
						</h5>
						<p class="list-group-item-text text-danger">
							{{v.owner[0].contactData.name}} {{v.owner[0].contactData.lastName}}
						</p>
						<p class="list-group-item-text">
							<span class="label label-default">{{v.creationDate | amDateFormat:'ll'}}</span>								
							<small>{{v.duration | secondsToHuman }}</small>
						</p>
						
						</div>
					</li>
				</ul>				
				
				
			  	<ul class="list-group" ui-sortable ng-model="channel.videos">
					<!--
			  	
					<li class="list-group-item" ng-repeat="v in channel.videos">
						<div class="row">

							<div class="col-sm-2">
							</div>
							<div class="col-sm-10">
								<h5 class="list-group-item-heading">
									<div style="display:inline-block; width:89%; white-space:nowrap; overflow: hidden; text-overflow=ellipsis"> {{v.title}} </div>
								</h5>
							</div>

						
						</div>
					
						<h5 class="list-group-item-heading">							
						    <div class="btn-group" dropdown is-open="status.isopen">
						      <button type="button" class="btn btn-primary btn-xs" dropdown-toggle>
						        {{$index+1}} <span class="caret"></span>
						      </button>
						      <ul class="dropdown-menu" role="menu">
						        <li role="menuitem"><a href="/player/?id={{v._id}}&autoplay=true" target="_blank"> <span class="glyphicon glyphicon-eye-open"></span> Visualizar </a></li>
						        <li role="menuitem"><a href="#/statistics/views/video/{{v._id}}" target="_blank"> <span class="glyphicon glyphicon-stats"></span> Estadísticas</a></li>
						        <li role="menuitem"><a href="#/admin/videos/edit/{{v._id}}" target="_blank"> <span class="glyphicon glyphicon-pencil"></span> Editar</a></li>
						        <li class="divider"></li>
						        <li role="menuitem"><a class="text-danger" href ng-click="removeVideoFromChannel(v)"> <span class="glyphicon glyphicon-remove"></span> Eliminar de este canal</a></li>
						      </ul>
						    </div>															
							<div style="display:inline-block; width:89%; white-space:nowrap; overflow: hidden; text-overflow=ellipsis"> {{v.title}} </div>
						</h5>
						<p class="list-group-item-text text-danger">
							{{v.owner[0].contactData.name}} {{v.owner[0].contactData.lastName}}
						</p>
						<p class="list-group-item-text">
							<span class="label label-default">{{v.creationDate | amDateFormat:'ll'}}</span>								
							<small>{{v._id}}</small>
						</p>
						-->
					</li>
				</ul>  
			</div>
		</div>

		<div class="row">
			<div class="col-sm-12">
				<button class="btn btn-default" onclick="window.history.back();">Volver</button>
				<button class="btn btn-primary pull-right" ng-click="updateChannel()" ng-disabled="updating || !form.$valid">
					<loader-field ng-show="updating"></loader-field>  Guardar
				</button>
			</div>
		</div>	
		<div style="height: 30px;"></div>
		
	</section>
</div>

<script type="text/ng-template" id="confirmDeleteChannel.html">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title text-danger">¿Estás seguro de querer borrar este canal?</h4>
	</div>
	<div class="modal-body">
		<div class="alert alert-danger" role="alert">
			<strong>Cuidado!</strong> Lee atentamente antes de continuar!
			<p><strong>Esta acción no se puede deshacer.</strong></p>
		</div>
		<p>Estás a punto de borrar el canal '{{channel.title}}' con identificador '{{channel._id}}'.</p>
		
		<div class="form-group">
			<label>Por favor, escribe el título del canal o el identificador para confirmar la operación.</label>
			<input ng-model="confirm" class="form-control">
		</div>		
		
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-danger" ng-click="accept()" ng-disabled="(confirm!=channel._id) && (confirm!=channel.title)">
			Entiendo las consecuencias, borrar el canal
		</button>
	</div>	
</script>


