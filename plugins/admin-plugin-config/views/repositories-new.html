<main>		

	<section class="ps-search-bar navbar navbar-default">
	    <div class="container-fluid">
	    

			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#admin-navbar-collapse-1" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>

			<div class="collapse navbar-collapse" id="admin-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<admin-plugins-menu></admin-plugins-menu>
					<li>
						<a href="#/admin/config">
				    		Configuration
				    	</a>
				    </li>
					<li class="active">
						<a href="#/admin/repositories">
				    		Repositories
				    	</a>
				    </li>
					<li>
						<a href="#/admin/catalogs">
				    		Catalogs
				    	</a>
				    </li>
				</ul>
			</div>
		</div>
	</section>


	<section>
	
		<div style="height: 30px;"></div>
		
		<div class="panel panel-primary">
			<div class="panel-heading">			
				<h2>Create a new repository</h2>
			</div>
			<div class="panel-body">
			
		
				<form name="form" class="form-horizontal" novalidate>
						
					<div class="form-group has-feedback" ng-class="{'has-success':form.name.$valid, 'has-error': !form.name.$pending && (!form.name.$valid) }">
						<label class="col-sm-2 control-label">Repository</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="repository._id" name="name" repository-check-unique required>
							
							<loader-field class="form-control-feedback" ng-show="form.name.$pending.catalogCheckUnique"></loader-field>
							<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" ng-show="form.name.$valid"> </span>
							<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" ng-show="form.name.$dirty && !form.name.$pending && (!form.name.$valid)"> </span>
							
							
							<div class="alert alert-danger" role="alert" ng-show="form.name.$error.catalogCheckUnique">
								<strong>Error!</strong><span> This repository already exists!</span>
							</div>																				
						</div>
					</div>
					
					<div class="form-group">
						<label class="col-sm-2 control-label">Description</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="repository.description">
						</div>
					</div>

					<div class="form-group">
						<label class="col-sm-2 control-label">Server</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="repository.server">
						</div>
					</div>

					<div class="form-group">
						<label class="col-sm-2 control-label">Endpoint</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="repository.endpoint">
						</div>
					</div>

					<div class="form-group">
						<label class="col-sm-2 control-label">Folder data</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="repository.path">
						</div>
					</div>


					<div class="panel panel-primary">
						<div class="panel-heading">Backups</div>
						<div class="panel-body">
						
						
							<div class="form-group">
								<div class="col-sm-offset-2 col-sm-10">
									<div class="checkbox">
										<label>
											<input type="checkbox" ng-model="repository.backup.enable"> Make backups of this repository
										</label>
									</div>
								</div>
							</div>
						
						
							<div class="form-group">
								<label class="col-sm-2 control-label">Mount Point</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" ng-model="repository.backup.mountPoint" ng-disabled="!repository.backup.enable">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">Relative Path</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" ng-model="repository.backup.relativePath" ng-disabled="!repository.backup.enable">
								</div>
							</div>
						</div>
					</div>


				</form>				
			</div>
		</div>
		
		
		<div class="row">
			<div class="col-sm-12">
				<button class="btn btn-default" onclick="window.history.back();">Back</button>
				<button class="btn btn-primary pull-right" ng-click="updateRepository()" ng-disabled="updating || !form.$valid">
					<loader-field ng-show="updating"></loader-field> Save
				</button>
			</div>
		</div>
			
	</section>
</main>
